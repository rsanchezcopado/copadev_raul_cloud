["{\"nodes\":{\"CG_ED_Story_Digest_Case\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"AccountId\"},{\"name\":\"ClosedDate\"},{\"name\":\"Id\"},{\"name\":\"CreatedDate\"},{\"name\":\"ContactId\"}],\"object\":\"Case\"}},\"CG_ED_Story_Augment_Case_onto_RetailStore\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"AccountId\",\"PrimaryContactId\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"Case\",\"rightKey\":[\"AccountId\",\"ContactId\"],\"rightSelect\":[\"Cases_Count\"]},\"sources\":[\"CG_ED_Story_Augment_RetailVisitKpi_onto_RetailStore\",\"CG_ED_Story_Filter_Case\"]},\"CG_ED_Story_Filter_Case\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"CreatedDate_Filter_Flag == 1\"},\"sources\":[\"CG_ED_Story_CE_Case\"]},\"CG_ED_Story_Augment_InStoreLocation_onto_RetailStore\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"InStoreLocation\",\"rightKey\":[\"RetailStoreId\"],\"rightSelect\":[\"Number_of_InStoreLocations\"]},\"sources\":[\"CG_ED_Story_Augment_Location_onto_RetailStore\",\"CG_ED_Story_CE_InStoreLocation\"]},\"CG_ED_Story_Register_ED\":{\"action\":\"register\",\"parameters\":{\"label\":\"CG_Maximize_Store_Sales_ED\",\"name\":\"CG_Maximize_Store_Sales_ED\"},\"sources\":[\"CG_ED_Story_Slice3_RetailStore\"]},\"CG_ED_Story_Augment_OrderItem_onto_RetailStore\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"OrderItem\",\"rightKey\":[\"Order.AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.Id\"],\"rightSelect\":[\"Quantity\",\"Unique_Products\",\"Order.AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.RetailLocationGroupId\"]},\"sources\":[\"CG_ED_Story_Augment_InStoreLocation_onto_RetailStore\",\"CG_ED_Story_CR_OrderItem_GetUniqueProductsByStore\"]},\"CG_ED_Story_Augment_RetailVisitKpi_onto_RetailStore\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"RetailVisitKpi\",\"rightKey\":[\"AssessmentTask.Visit.RetailStore.Id\"],\"rightSelect\":[\"SoS_Compliance_Temp\",\"SoS_Tasks_Count\",\"OutOfStock_Compliance_Temp\",\"OutOfStock_Tasks_Count\",\"Promotion_Compliance_Temp\",\"Promotion_Tasks_Count\",\"Facing_Compliance_Temp\",\"Facing_Tasks_Count\",\"Number_of_Promotions\"]},\"sources\":[\"CG_ED_Story_Augment_PlannedVisits_onto_RetailStore\",\"CG_ED_Story_CR_RetailVisitKpi\"]},\"CG_ED_Story_Augment_SurveyInvitation_onto_SurveySubject\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"ParentId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"SurveyInvitation\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Id\"]},\"sources\":[\"CG_ED_Story_Digest_SurveySubject\",\"CG_ED_Story_Digest_SurveyInvitation\"]},\"CG_ED_Story_Filter_AssessmentTaskOrder_Remove_Duplicates\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"'IsDuplicate' == \\\"False\\\"\"},\"sources\":[\"CG_ED_Story_CE_AssessmentTaskOrder_Find_Duplicate_Orders\"]},\"CG_ED_Story_Augment_AssessmentTaskOrder_onto_Order\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"AssessmentTaskOrder\",\"rightKey\":[\"OrderId\"],\"rightSelect\":[\"AssessmentTask.Visit.RetailStore.Id\",\"AssessmentTask.Visit.RetailStore.RetailLocationGroupId\"]},\"sources\":[\"CG_ED_Story_Digest_Order\",\"CG_ED_Story_Augment_AssessmentTask_onto_AssessmentTaskOrder\"]},\"CG_ED_Story_Augment_Location_onto_RetailStore\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"LocationId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Location\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Address.City\",\"Address.State\"]},\"sources\":[\"CG_ED_Story_Digest_RetailStore\",\"CG_ED_Story_Augment_Address_onto_Location\"]},\"CG_ED_Story_CE_RetailStore1\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"StoreTextDummy\",\"name\":\"StoreTextDummy\",\"saqlExpression\":\"\\\"S1\\\"\",\"type\":\"Text\"},{\"defaultValue\":\"0\",\"label\":\"% Successful visits\",\"name\":\"Percent_Successful_Visits\",\"precision\":16,\"saqlExpression\":\"'ActualVisits.Completed_Visits' / 'ActualVisits.Completed_and_Abandoned_Visits' * 100\",\"scale\":2,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"Visit duration\",\"name\":\"Avg_Visit_Duration\",\"precision\":16,\"saqlExpression\":\"'ActualVisits.ActualVisitDuration' / 'ActualVisits.Completed_and_Abandoned_Visits'\",\"scale\":0,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"% High priority visits completed\",\"name\":\"Percent_High_Priority_Visits_Completed\",\"precision\":16,\"saqlExpression\":\"'ActualVisits.High_Priority_Visits_Completed' / 'PlannedVisits.Total_High_Priority_Visits_Planned' * 100\",\"scale\":2,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"SoS Compliance\",\"name\":\"ShareOfShelf_Compliance\",\"precision\":16,\"saqlExpression\":\"'RetailVisitKpi.SoS_Compliance_Temp' / 'RetailVisitKpi.SoS_Tasks_Count'\",\"scale\":2,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"OOS Compliance\",\"name\":\"OutOfStock_Compliance\",\"precision\":16,\"saqlExpression\":\"'RetailVisitKpi.OutOfStock_Compliance_Temp' / 'RetailVisitKpi.OutOfStock_Tasks_Count'\",\"scale\":2,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"Facings Compliance\",\"name\":\"Facing_Compliance\",\"precision\":16,\"saqlExpression\":\"'RetailVisitKpi.Facing_Compliance_Temp' / 'RetailVisitKpi.Facing_Tasks_Count'\",\"scale\":2,\"type\":\"Numeric\"},{\"defaultValue\":\"0\",\"label\":\"Promotion Compliance\",\"name\":\"Promotion_Compliance\",\"precision\":16,\"saqlExpression\":\"'RetailVisitKpi.Promotion_Compliance_Temp' / 'RetailVisitKpi.Promotion_Tasks_Count'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"NPS\",\"name\":\"NetPromoterScore\",\"precision\":16,\"saqlExpression\":\"(('SurveyQuestionResponse.Promoters' / 'SurveyQuestionResponse.All_Responses') - ('SurveyQuestionResponse.Detractors' / 'SurveyQuestionResponse.All_Responses')) * 100\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Total_Stores\",\"name\":\"Total_Stores\",\"precision\":16,\"saqlExpression\":\"1\",\"scale\":0,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"CG_ED_Story_Filter_RetailStore\"]},\"CG_ED_Story_CE_RetailStore2\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"defaultValue\":\"All Stores\",\"label\":\"Average_by\",\"name\":\"Average_by\",\"saqlExpression\":\"\\\"All Stores\\\"\",\"type\":\"Text\"},{\"label\":\"Avg in-store Locations\",\"name\":\"Avg_InStore_Locations\",\"precision\":16,\"saqlExpression\":\"case when 'Average_by' == \\\"All Stores\\\" ||  'RetailLocationGroupId' is null then 'Avg_InStore_Locations_by_AllStores' else 'RetailStoreGroup.Avg_InStore_Locations_by_StoreGroup' end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Avg Products ordered\",\"name\":\"Avg_Products\",\"precision\":16,\"saqlExpression\":\"case when 'Average_by' == \\\"All Stores\\\" ||  'RetailLocationGroupId' is null then 'Avg_Products_by_AllStores' else 'RetailStoreGroup.Avg_Products_by_StoreGroup' end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Avg SoS Compliance\",\"name\":\"Avg_SoS_Compliance\",\"precision\":16,\"saqlExpression\":\"case when 'Average_by' == \\\"All Stores\\\" ||  'RetailLocationGroupId' is null then 'Avg_SoS_Compliance_by_AllStores' else 'RetailStoreGroup.Avg_SoS_Compliance_by_StoreGroup' end\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg OOS Compliance\",\"name\":\"Avg_OOS_Compliance\",\"precision\":16,\"saqlExpression\":\"case when 'Average_by' == \\\"All Stores\\\" ||  'RetailLocationGroupId' is null then 'Avg_OOS_Compliance_by_AllStores' else 'RetailStoreGroup.Avg_OOS_Compliance_by_StoreGroup' end\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg Facing Compliance\",\"name\":\"Avg_Facing_Compliance\",\"precision\":16,\"saqlExpression\":\"case when 'Average_by' == \\\"All Stores\\\" ||  'RetailLocationGroupId' is null then 'Avg_Facing_Compliance_by_AllStores' else 'RetailStoreGroup.Avg_Facing_Compliance_by_StoreGroup' end\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg Promotion Compliance\",\"name\":\"Avg_Promotion_Compliance\",\"precision\":16,\"saqlExpression\":\"case when 'Average_by' == \\\"All Stores\\\" ||  'RetailLocationGroupId' is null then 'Avg_Promotion_Compliance_by_AllStores' else 'RetailStoreGroup.Avg_Promotion_Compliance_by_StoreGroup' end\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"# Visits\",\"name\":\"Avg_Visits_Planned\",\"precision\":16,\"saqlExpression\":\"case when 'Average_by' == \\\"All Stores\\\" ||  'RetailLocationGroupId' is null then 'Avg_Visits_Planned_by_AllStores' else 'RetailStoreGroup.Avg_Visits_Planned_by_StoreGroup' end\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg high priority visits\",\"name\":\"Avg_High_Priority_Visits_Planned\",\"precision\":16,\"saqlExpression\":\"case when 'Average_by' == \\\"All Stores\\\" ||  'RetailLocationGroupId' is null then 'Avg_High_Priority_Visits_Planned_by_AllStores' else 'RetailStoreGroup.Avg_High_Priority_Visits_Planned_by_StoreGroup' end\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg Promotions\",\"name\":\"Avg_Promotions\",\"precision\":16,\"saqlExpression\":\"case when 'Average_by' == \\\"All Stores\\\" ||  'RetailLocationGroupId' is null then 'Avg_Promotions_by_AllStores' else 'RetailStoreGroup.Avg_Promotions_by_StoreGroup' end\",\"scale\":2,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"CG_ED_Story_Augment_RetailStoreGroup_onto_RetailStore\"]},\"CG_ED_Story_Digest_SurveyInvitation\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"InvitationLink\"},{\"name\":\"Name\"},{\"name\":\"ParticipantId\"},{\"name\":\"ResponseStatus\"}],\"object\":\"SurveyInvitation\"}},\"CG_ED_Story_CR_AssessmentTaskOrder_Find_Previous_Orders\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"offset\":\"previous()\",\"sourceField\":\"OrderId\"},\"label\":\"OrderIdPrevious\",\"name\":\"OrderIdPrevious\"}],\"orderBy\":[{\"direction\":\"desc\",\"name\":\"LastModifiedDate\"}],\"partitionBy\":[\"OrderId\"]},\"sources\":[\"CG_ED_Story_Digest_AssessmentTaskOrder\"]},\"CG_ED_Story_Augment_PlannedVisits_onto_RetailStore\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"PlannedVisits\",\"rightKey\":[\"PlaceId\"],\"rightSelect\":[\"Total_Visits_Planned\",\"Total_High_Priority_Visits_Planned\"]},\"sources\":[\"CG_ED_Story_Augment_ActualVisits_onto_RetailStore\",\"CG_ED_Story_Filter_Planned_Visits\"]},\"CG_ED_Story_Augment_AID_onto_RetailVisitKpi\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"AssessmentIndDefinitionId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"AssessmentIndicatorDefinition\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"DataType\"]},\"sources\":[\"CG_ED_Story_Digest_RetailVisitKpi\",\"CG_ED_Story_Digest_AssessmentIndicatorDefinition\"]},\"CG_ED_Story_Digest_SurveyQuestion\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"QuestionName\"},{\"name\":\"QuestionType\"}],\"object\":\"SurveyQuestion\"}},\"CG_ED_Story_Filter_RetailVisitKpi\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"'AssessmentTask.Visit.ActualVisitStartTime_Filter_Flag' == 1 && 'Include_In_Compliance' == \\\"True\\\"\"},\"sources\":[\"CG_ED_Story_CE_RetailVisitKpi_Compute_Values\"]},\"CG_ED_Story_Augment_RetailStore_onto_Visit\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"PlaceId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"RetailStore\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"AccountId\",\"Id\",\"RetailLocationGroupId\",\"Priority\",\"Name\",\"Location.Address.City\",\"Location.Address.State\",\"PrimaryContactId\"]},\"sources\":[\"CG_ED_Story_CE_Visit\",\"CG_ED_Story_Augment_Location_onto_RetailStore\"]},\"CG_ED_Story_Digest_SurveyQuestionResponse\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"CreatedDate\"},{\"name\":\"Datatype\"},{\"name\":\"Id\"},{\"name\":\"InvitationId\"},{\"name\":\"IsDeleted\"},{\"name\":\"NumberValue\"},{\"name\":\"QuestionChoiceId\"},{\"name\":\"QuestionId\"},{\"name\":\"ResponseId\"},{\"name\":\"ResponseValue\"}],\"object\":\"SurveyQuestionResponse\"}},\"CG_ED_Story_Augment_ActualVisits_onto_RetailStore\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"ActualVisits\",\"rightKey\":[\"PlaceId\"],\"rightSelect\":[\"ActualVisitDuration\",\"Attempted_Visits\",\"Completed_Visits\",\"High_Priority_Visits_Completed\",\"Completed_and_Abandoned_Visits\"]},\"sources\":[\"CG_ED_Story_Augment_OrderItem_onto_RetailStore\",\"CG_ED_Story_Filter_Actual_Visits\"]},\"CG_ED_Story_Augment_SurveyQuestion_onto_SurveyQuestionResponse\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"QuestionId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"SurveyQuestion\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\",\"QuestionName\",\"QuestionType\"]},\"sources\":[\"CG_ED_Story_Digest_SurveyQuestionResponse\",\"CG_ED_Story_Digest_SurveyQuestion\"]},\"CG_ED_Story_Digest_OrderItem\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"AvailableQuantity\"},{\"name\":\"Id\"},{\"name\":\"UnitPrice\"},{\"name\":\"TotalPrice\"},{\"name\":\"Quantity\"},{\"name\":\"Product2Id\"},{\"name\":\"OrderItemNumber\"},{\"name\":\"OrderId\"},{\"name\":\"ListPrice\"},{\"name\":\"IsDeleted\"}],\"object\":\"OrderItem\"}},\"CG_ED_Story_Augment_Product_onto_OrderItem\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Product2Id\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Product\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\"]},\"sources\":[\"CG_ED_Story_Digest_OrderItem\",\"CG_ED_Story_Digest_Product\"]},\"CG_ED_Story_Augment_Survey_onto_SurveySubject\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SurveyId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Survey\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Description\",\"Name\",\"SurveyType\"]},\"sources\":[\"CG_ED_Story_Augment_SurveyInvitation_onto_SurveySubject\",\"CG_ED_Story_Digest_Survey\"]},\"CG_ED_Story_Digest_AssessmentTask\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"TaskType\"},{\"name\":\"Name\"},{\"name\":\"Id\"},{\"name\":\"ParentId\"}],\"object\":\"AssessmentTask\"}},\"CG_ED_Story_Augment_RetailStore_onto_SurveySubject\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SubjectId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"RetailStore\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Id\",\"PrimaryContactId\",\"Name\"]},\"sources\":[\"CG_ED_Story_Augment_Survey_onto_SurveySubject\",\"CG_ED_Story_Augment_Location_onto_RetailStore\"]},\"CG_ED_Story_Digest_AssessmentIndicatorDefinition\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"DataType\"},{\"name\":\"Name\"},{\"name\":\"Id\"},{\"name\":\"Description\"}],\"object\":\"AssessmentIndicatorDefinition\"}},\"CG_ED_Story_Filter_Planned_Visits\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"PlannedVisitStartTime_Filter_Flag == 1\"},\"sources\":[\"CG_ED_Story_CE_Visit\"]},\"CG_ED_Story_CE_InStoreLocation\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Number_of_InStoreLocations\",\"name\":\"Number_of_InStoreLocations\",\"precision\":10,\"saqlExpression\":\"1\",\"scale\":0,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"CG_ED_Story_Digest_InStoreLocation\"]},\"CG_ED_Story_CE_AssessmentTaskOrder_Find_Duplicate_Orders\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"IsDuplicate\",\"name\":\"IsDuplicate\",\"saqlExpression\":\"case when 'OrderId' == 'OrderIdPrevious' then \\\"True\\\" else \\\"False\\\" end\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"CG_ED_Story_CR_AssessmentTaskOrder_Find_Previous_Orders\"]},\"CG_ED_Story_Digest_RetailVisitKpi\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"ActualBooleanValue\"},{\"name\":\"ActualDecimalValue\"},{\"name\":\"ActualIntegerValue\"},{\"name\":\"AssessmentIndDefinitionId\"},{\"name\":\"AssessmentTaskId\"},{\"name\":\"Id\"},{\"name\":\"InStoreLocationId\"},{\"name\":\"UnitOfMeasure\"},{\"name\":\"Type\"},{\"name\":\"TargetIntegerValue\"},{\"name\":\"TargetDecimalValue\"},{\"name\":\"TargetBooleanValue\"},{\"name\":\"ProductId\"},{\"name\":\"ProductCategoryId\"},{\"name\":\"Name\"},{\"name\":\"PromotionId\"},{\"name\":\"ActualDateTimeValue\"},{\"name\":\"ActualStringValue\"}],\"object\":\"RetailVisitKpi\"}},\"CG_ED_Story_Filter_SurveyQuestionResponse\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"date('SurveyResponse.CompletionDateTime_Year', 'SurveyResponse.CompletionDateTime_Month', 'SurveyResponse.CompletionDateTime_Day') in [\\\"90 days ago\\\"..\\\"current day\\\"]\"},\"sources\":[\"CG_ED_Story_SurveyResponse_onto_SurveyQuestionResponse\"]},\"CG_ED_Story_Filter_SurveyQuestionResponse_GetFirstResponse\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"FirstResponseValue is null\"},\"sources\":[\"CG_ED_Story_CR_SurveyQuestionResponse\"]},\"CG_ED_Story_Digest_Location\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"VisitorAddressId\"},{\"name\":\"Id\"}],\"object\":\"Location\"}},\"CG_ED_Story_Augment_RetailStore_onto_RetailStoreGroup\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"StoreGroup\",\"rightKey\":[\"RetailLocationGroupId\"],\"rightSelect\":[\"PlannedVisits.Total_Visits_Planned\",\"PlannedVisits.Total_High_Priority_Visits_Planned\",\"Total_Stores\",\"OutOfStock_Compliance\",\"ShareOfShelf_Compliance\",\"Promotion_Compliance\",\"Facing_Compliance\",\"InStoreLocation.Number_of_InStoreLocations\",\"RetailVisitKpi.Number_of_Promotions\",\"OrderItem.Order.AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.RetailLocationGroupId\"]},\"sources\":[\"CG_ED_Story_Digest_RetailStoreGroup\",\"CG_ED_Story_CE_RetailStore1\"]},\"CG_ED_Story_Digest_Survey\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Description\"},{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"SurveyType\"}],\"object\":\"Survey\"}},\"CG_ED_Story_Augment_Address_onto_Location\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"VisitorAddressId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Address\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"City\",\"State\"]},\"sources\":[\"CG_ED_Story_Digest_Location\",\"CG_ED_Story_Digest_Address\"]},\"CG_ED_Story_Augment_AssessmentTask_onto_RetailVisitKpi\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"AssessmentTaskId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"AssessmentTask\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"TaskType\",\"Visit.ActualVisitStartTime\",\"Visit.Id\",\"Visit.ActualVisitStartTime_Filter_Flag\",\"Visit.RetailStore.Id\",\"Visit.RetailStore.Name\",\"Visit.RetailStore.RetailLocationGroupId\"]},\"sources\":[\"CG_ED_Story_Augment_AID_onto_RetailVisitKpi\",\"CG_ED_Story_Augment_Visit_onto_AssessmentTask\"]},\"CG_ED_Story_Augment_SurveyQuestionResponse_onto_RetailStore\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"SurveyQuestionResponse\",\"rightKey\":[\"SurveyResponse.SurveySubject.RetailStoreId\"],\"rightSelect\":[\"All_Responses\",\"Detractors\",\"Promoters\"]},\"sources\":[\"CG_ED_Story_Augment_Case_onto_RetailStore\",\"CG_ED_Story_Filter_SurveyQuestionResponse\"]},\"CG_ED_Story_CE_RetailVisitKpi_Compute_Values\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Target_Empty_Flag\",\"name\":\"Target_Empty_Flag\",\"saqlExpression\":\"case when 'AssessmentIndicatorDefinition.DataType' == \\\"Number\\\" then case when 'ActualIntegerValue' is not null && 'TargetIntegerValue' is null then \\\"True\\\" else \\\"False\\\" end\\nwhen 'AssessmentIndicatorDefinition.DataType' == \\\"Decimal\\\" then case when 'ActualDecimalValue' is not null && 'TargetDecimalValue' is null then \\\"True\\\" else \\\"False\\\" end\\nwhen 'AssessmentIndicatorDefinition.DataType' == \\\"Boolean\\\" then case when 'ActualBooleanValue' is not null && 'TargetBooleanValue' is null then \\\"True\\\" else \\\"False\\\" end end\",\"type\":\"Text\"},{\"label\":\"ActualValue_Num_Dec_Computed\",\"name\":\"ActualValue_Num_Dec_Computed\",\"precision\":16,\"saqlExpression\":\"case when 'AssessmentIndicatorDefinition.DataType' == \\\"Number\\\" then 'ActualIntegerValue' when 'AssessmentIndicatorDefinition.DataType' == \\\"Decimal\\\" then 'ActualDecimalValue' end\",\"scale\":5,\"type\":\"Numeric\"},{\"label\":\"TargetValue_Num_Dec_Computed\",\"name\":\"TargetValue_Num_Dec_Computed\",\"precision\":16,\"saqlExpression\":\"case when 'AssessmentIndicatorDefinition.DataType' == \\\"Number\\\" then 'TargetIntegerValue' when 'AssessmentIndicatorDefinition.DataType' == \\\"Decimal\\\" then 'TargetDecimalValue' end\",\"scale\":5,\"type\":\"Numeric\"},{\"label\":\"ActualValue_Num_Dec_Adjusted\",\"name\":\"ActualValue_Num_Dec_Adjusted\",\"precision\":16,\"saqlExpression\":\"case when 'Target_Empty_Flag' == \\\"False\\\" && 'ActualValue_Num_Dec_Computed' > 'TargetValue_Num_Dec_Computed' then 'TargetValue_Num_Dec_Computed' else 'ActualValue_Num_Dec_Computed' end\",\"scale\":5,\"type\":\"Numeric\"},{\"label\":\"Fill_Target_Num_Dec_when_Empty\",\"name\":\"Fill_Target_Num_Dec_when_Empty\",\"precision\":16,\"saqlExpression\":\"case when 'Type' in [\\\"Facing\\\",\\\"ShareOfShelf\\\", \\\"Inventory\\\"] && 'AssessmentIndicatorDefinition.DataType' in [\\\"Number\\\", \\\"Decimal\\\"] && 'Target_Empty_Flag' == \\\"True\\\" then 'ActualValue_Num_Dec_Computed' else 'TargetValue_Num_Dec_Computed' end\",\"scale\":5,\"type\":\"Numeric\"},{\"label\":\"Fill_Target_Boolean_when_Empty\",\"name\":\"Fill_Target_Boolean_when_Empty\",\"saqlExpression\":\"case when 'AssessmentIndicatorDefinition.DataType' == \\\"Boolean\\\" then case when 'Target_Empty_Flag' == \\\"False\\\" then 'TargetBooleanValue' else case when 'Type' != \\\"OutOfStock\\\" && 'ActualBooleanValue'==\\\"True\\\" then 'ActualBooleanValue' else \\\"False\\\" end end end\",\"type\":\"Text\"},{\"label\":\"ActualValue_Computed\",\"name\":\"ActualValue_Computed\",\"precision\":16,\"saqlExpression\":\"case when 'AssessmentIndicatorDefinition.DataType' in [\\\"Number\\\",\\\"Decimal\\\"] then 'ActualValue_Num_Dec_Adjusted' when 'AssessmentIndicatorDefinition.DataType' == \\\"Boolean\\\" then \\ncase when 'ActualBooleanValue' == \\\"True\\\" then 1 else 0 end end\",\"scale\":5,\"type\":\"Numeric\"},{\"label\":\"TargetValue_Computed\",\"name\":\"TargetValue_Computed\",\"precision\":16,\"saqlExpression\":\"case when 'AssessmentIndicatorDefinition.DataType' in [\\\"Number\\\",\\\"Decimal\\\"] then 'Fill_Target_Num_Dec_when_Empty' when 'AssessmentIndicatorDefinition.DataType' == \\\"Boolean\\\" then case when 'Fill_Target_Boolean_when_Empty' == \\\"True\\\" then 1 else 0 end end\",\"scale\":5,\"type\":\"Numeric\"},{\"label\":\"NonCompliance_Percentage\",\"name\":\"NonCompliance_Percentage\",\"precision\":16,\"saqlExpression\":\"case when 'AssessmentIndicatorDefinition.DataType' == \\\"Boolean\\\" then abs('ActualValue_Computed' - 'TargetValue_Computed')*100 else abs('ActualValue_Computed' - 'TargetValue_Computed')/'TargetValue_Computed' *100 end\",\"scale\":5,\"type\":\"Numeric\"},{\"label\":\"Compliance_Percentage\",\"name\":\"Compliance_Percentage\",\"precision\":16,\"saqlExpression\":\"100 - 'NonCompliance_Percentage'\",\"scale\":5,\"type\":\"Numeric\"},{\"label\":\"Target_n_Actual_Values_Present_Flag\",\"name\":\"Target_n_Actual_Values_Present_Flag\",\"saqlExpression\":\"case when 'AssessmentIndicatorDefinition.DataType' == \\\"Number\\\" && 'ActualIntegerValue' is not null then \\\"True\\\" when 'AssessmentIndicatorDefinition.DataType' == \\\"Decimal\\\" && 'ActualDecimalValue' is not null then \\\"True\\\" when 'AssessmentIndicatorDefinition.DataType' == \\\"Boolean\\\" && 'ActualBooleanValue' is not null then \\\"True\\\" else \\\"False\\\" end\",\"type\":\"Text\"},{\"label\":\"Include in Compliance - Temp\",\"name\":\"Include_In_Compliance_Temp\",\"saqlExpression\":\"case when 'AssessmentIndicatorDefinition.DataType' in [\\\"Number\\\",\\\"Decimal\\\"] && 'Type' in [\\\"Facing\\\",\\\"ShareOfShelf\\\", \\\"Inventory\\\"] then \\\"True\\\" when 'AssessmentIndicatorDefinition.DataType' == \\\"Boolean\\\" && ('PromotionId' is not null || 'Type' == \\\"OutOfStock\\\") then \\\"True\\\" else \\\"False\\\" end\",\"type\":\"Text\"},{\"label\":\"Include In Compliance?\",\"name\":\"Include_In_Compliance\",\"saqlExpression\":\"case when 'Target_n_Actual_Values_Present_Flag' == \\\"True\\\" && 'Include_In_Compliance_Temp' == \\\"True\\\" then \\\"True\\\" else \\\"False\\\" end\",\"type\":\"Text\"},{\"label\":\"Type_Computed\",\"name\":\"Type_Computed\",\"saqlExpression\":\"case when 'PromotionId' is not null then \\\"Promotion\\\" else 'Type' end\",\"type\":\"Text\"},{\"label\":\"Completed_Tasks_Count\",\"name\":\"Completed_Tasks_Count\",\"precision\":10,\"saqlExpression\":\"case when ActualIntegerValue is not null || ActualDecimalValue is not null || ActualBooleanValue is not null || ActualDateTimeValue is not null || ActualStringValue is not null then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"format\":\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\",\"isYearEndFiscalYear\":false,\"label\":\"ActualVisitStartTime\",\"name\":\"ActualVisitStartTime\",\"saqlExpression\":\"toDate('AssessmentTask.Visit.ActualVisitStartTime_sec_epoch')\",\"type\":\"Date\"},{\"label\":\"SoS_Compliance_Temp\",\"name\":\"SoS_Compliance_Temp\",\"precision\":16,\"saqlExpression\":\"case when 'Type_Computed' == \\\"ShareOfShelf\\\" then Compliance_Percentage end\",\"scale\":5,\"type\":\"Numeric\"},{\"label\":\"SoS_Tasks_Count\",\"name\":\"SoS_Tasks_Count\",\"precision\":10,\"saqlExpression\":\"case when 'Type_Computed' == \\\"ShareOfShelf\\\" then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"OutOfStock_Compliance_Temp\",\"name\":\"OutOfStock_Compliance_Temp\",\"precision\":16,\"saqlExpression\":\"case when 'Type_Computed' == \\\"OutOfStock\\\" then Compliance_Percentage end\",\"scale\":5,\"type\":\"Numeric\"},{\"label\":\"OutOfStock_Tasks_Count\",\"name\":\"OutOfStock_Tasks_Count\",\"precision\":10,\"saqlExpression\":\"case when 'Type_Computed' == \\\"OutOfStock\\\" then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Promotion_Compliance_Temp\",\"name\":\"Promotion_Compliance_Temp\",\"precision\":16,\"saqlExpression\":\"case when 'Type_Computed' == \\\"Promotion\\\" then Compliance_Percentage end\",\"scale\":5,\"type\":\"Numeric\"},{\"label\":\"Promotion_Tasks_Count\",\"name\":\"Promotion_Tasks_Count\",\"precision\":10,\"saqlExpression\":\"case when 'Type_Computed' == \\\"Promotion\\\" then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Facing_Compliance_Temp\",\"name\":\"Facing_Compliance_Temp\",\"precision\":16,\"saqlExpression\":\"case when 'Type_Computed' == \\\"Facing\\\" then Compliance_Percentage end\",\"scale\":5,\"type\":\"Numeric\"},{\"label\":\"Facing_Tasks_Count\",\"name\":\"Facing_Tasks_Count\",\"precision\":10,\"saqlExpression\":\"case when 'Type_Computed' == \\\"Facing\\\" then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"CG_ED_Story_Augment_AssessmentTask_onto_RetailVisitKpi\"]},\"CG_ED_Story_Digest_Product\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Name\"},{\"name\":\"Id\"},{\"name\":\"Family\"}],\"object\":\"Product2\"}},\"CG_ED_Story_OrderItem_onto_RetailStoreGroup\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"OrderItem\",\"rightKey\":[\"Order.AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.RetailLocationGroupId\"],\"rightSelect\":[\"Unique_Products_SG\",\"Order.AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.RetailLocationGroupId\"]},\"sources\":[\"CG_ED_Story_Augment_RetailStore_onto_RetailStoreGroup\",\"CG_ED_Story_CR_OrderItem_GetUniqueProductsByStoreGroup\"]},\"CG_ED_Story_Slice1_RetailStore\":{\"action\":\"sliceDataset\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"StoreType\"},{\"name\":\"RetailLocationGroupId\"},{\"name\":\"Priority\"},{\"name\":\"Name\"},{\"name\":\"Location.Address.City\"},{\"name\":\"Location.Address.State\"},{\"name\":\"OrderItem.Quantity\"},{\"name\":\"OrderItem.Unique_Products\"},{\"name\":\"ActualVisits.ActualVisitDuration\"},{\"name\":\"ActualVisits.Attempted_Visits\"},{\"name\":\"ActualVisits.Completed_Visits\"},{\"name\":\"ActualVisits.Completed_and_Abandoned_Visits\"},{\"name\":\"ActualVisits.High_Priority_Visits_Completed\"},{\"name\":\"PlannedVisits.Total_Visits_Planned\"},{\"name\":\"PlannedVisits.Total_High_Priority_Visits_Planned\"},{\"name\":\"RetailVisitKpi.SoS_Compliance_Temp\"},{\"name\":\"RetailVisitKpi.SoS_Tasks_Count\"},{\"name\":\"RetailVisitKpi.OutOfStock_Compliance_Temp\"},{\"name\":\"RetailVisitKpi.OutOfStock_Tasks_Count\"},{\"name\":\"RetailVisitKpi.Promotion_Compliance_Temp\"},{\"name\":\"RetailVisitKpi.Promotion_Tasks_Count\"},{\"name\":\"RetailVisitKpi.Facing_Compliance_Temp\"},{\"name\":\"RetailVisitKpi.Facing_Tasks_Count\"},{\"name\":\"Case.Cases_Count\"},{\"name\":\"SurveyQuestionResponse.Promoters\"},{\"name\":\"SurveyQuestionResponse.Detractors\"},{\"name\":\"SurveyQuestionResponse.All_Responses\"},{\"name\":\"RetailVisitKpi.Number_of_Promotions\"},{\"name\":\"InStoreLocation.Number_of_InStoreLocations\"},{\"name\":\"OrderItem.Order.AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.RetailLocationGroupId\"}],\"mode\":\"select\"},\"sources\":[\"CG_ED_Story_Augment_SurveyQuestionResponse_onto_RetailStore\"]},\"CG_ED_Story_Augment_RetailStore_Self\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"StoreTextDummy\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"Total\",\"rightKey\":[\"StoreTextDummy\"],\"rightSelect\":[\"InStoreLocation.Number_of_InStoreLocations\",\"OrderItem.Unique_Products\",\"PlannedVisits.Total_Visits_Planned\",\"PlannedVisits.Total_High_Priority_Visits_Planned\",\"ShareOfShelf_Compliance\",\"OutOfStock_Compliance\",\"Facing_Compliance\",\"Promotion_Compliance\",\"Total_Stores\",\"RetailVisitKpi.Number_of_Promotions\",\"OrderItem.Order.AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.RetailLocationGroupId\"]},\"sources\":[\"CG_ED_Story_CE_RetailStore1\",\"CG_ED_Story_CE_RetailStore1\"]},\"CG_ED_Story_CE_RetailStoreGroup_Calc_Avg\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Avg_InStore_Locations_by_StoreGroup\",\"name\":\"Avg_InStore_Locations_by_StoreGroup\",\"precision\":16,\"saqlExpression\":\"'StoreGroup.InStoreLocation.Number_of_InStoreLocations' / 'StoreGroup.Total_Stores'\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Avg_Products_by_StoreGroup\",\"name\":\"Avg_Products_by_StoreGroup\",\"precision\":16,\"saqlExpression\":\"'OrderItem.Unique_Products_SG' / 'StoreGroup.Total_Stores'\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Avg_SoS_Compliance_by_StoreGroup\",\"name\":\"Avg_SoS_Compliance_by_StoreGroup\",\"precision\":16,\"saqlExpression\":\"'StoreGroup.ShareOfShelf_Compliance' / 'StoreGroup.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_OOS_Compliance_by_StoreGroup\",\"name\":\"Avg_OOS_Compliance_by_StoreGroup\",\"precision\":16,\"saqlExpression\":\"'StoreGroup.OutOfStock_Compliance' / 'StoreGroup.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_Facing_Compliance_by_StoreGroup\",\"name\":\"Avg_Facing_Compliance_by_StoreGroup\",\"precision\":16,\"saqlExpression\":\"'StoreGroup.Facing_Compliance' / 'StoreGroup.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_Promotion_Compliance_by_StoreGroup\",\"name\":\"Avg_Promotion_Compliance_by_StoreGroup\",\"precision\":16,\"saqlExpression\":\"'StoreGroup.Promotion_Compliance' / 'StoreGroup.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_Visits_Planned_by_StoreGroup\",\"name\":\"Avg_Visits_Planned_by_StoreGroup\",\"precision\":16,\"saqlExpression\":\"'StoreGroup.PlannedVisits.Total_Visits_Planned' / 'StoreGroup.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_High_Priority_Visits_Planned_by_StoreGroup\",\"name\":\"Avg_High_Priority_Visits_Planned_by_StoreGroup\",\"precision\":16,\"saqlExpression\":\"'StoreGroup.PlannedVisits.Total_High_Priority_Visits_Planned' / 'StoreGroup.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_Promotions_by_StoreGroup\",\"name\":\"Avg_Promotions_by_StoreGroup\",\"precision\":16,\"saqlExpression\":\"'StoreGroup.RetailVisitKpi.Number_of_Promotions' / 'StoreGroup.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"CG_ED_Story_OrderItem_onto_RetailStoreGroup\"]},\"CG_ED_Story_Digest_RetailStoreGroup\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"}],\"object\":\"RetailLocationGroup\"}},\"CG_ED_Story_Digest_Address\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"City\"},{\"name\":\"Country\"},{\"name\":\"State\"},{\"name\":\"Name\"},{\"name\":\"Id\"}],\"object\":\"Address\"}},\"CG_ED_Story_CE_Visit\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"PlannedVisitStartTime_Filter_Flag\",\"name\":\"PlannedVisitStartTime_Filter_Flag\",\"precision\":10,\"saqlExpression\":\"case when date('PlannedVisitStartTime_Year', 'PlannedVisitStartTime_Month', 'PlannedVisitStartTime_Day') in [\\\"90 days ago\\\"..\\\"current day\\\"] then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"ActualVisitStartTime_Filter_Flag\",\"name\":\"ActualVisitStartTime_Filter_Flag\",\"precision\":10,\"saqlExpression\":\"case when date('ActualVisitStartTime_Year', 'ActualVisitStartTime_Month', 'ActualVisitStartTime_Day') in [\\\"90 days ago\\\"..\\\"current day\\\"] then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Planned Visit Duration (Minutes)\",\"name\":\"PlannedVisitDuration\",\"precision\":16,\"saqlExpression\":\"(PlannedVisitEndTime_sec_epoch - PlannedVisitStartTime_sec_epoch)/60\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Actual Visit Duration (Minutes)\",\"name\":\"ActualVisitDuration\",\"precision\":16,\"saqlExpression\":\"(ActualVisitEndTime_sec_epoch - ActualVisitStartTime_sec_epoch)/60\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Attempted_Visits\",\"name\":\"Attempted_Visits\",\"precision\":10,\"saqlExpression\":\"case when 'Status' in [\\\"Completed\\\", \\\"Abandoned\\\", \\\"InProgress\\\"] then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Completed_Visits\",\"name\":\"Completed_Visits\",\"precision\":10,\"saqlExpression\":\"case when 'Status' == \\\"Completed\\\" then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Completed_and_Abandoned_Visits\",\"name\":\"Completed_and_Abandoned_Visits\",\"precision\":10,\"saqlExpression\":\"case when 'Status' in [\\\"Completed\\\", \\\"Abandoned\\\"] then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Total_Visits_Planned\",\"name\":\"Total_Visits_Planned\",\"precision\":10,\"saqlExpression\":\"1\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"High_Priority_Visits_Completed\",\"name\":\"High_Priority_Visits_Completed\",\"precision\":10,\"saqlExpression\":\"case when 'VisitPriority' == \\\"High\\\" && 'Status' == \\\"Completed\\\" then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Total_High_Priority_Visits_Planned\",\"name\":\"Total_High_Priority_Visits_Planned\",\"precision\":10,\"saqlExpression\":\"case when 'VisitPriority' == \\\"High\\\" then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"CG_ED_Story_Digest_Visit\"]},\"CG_ED_Story_Digest_Visit\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"ActualVisitEndTime\"},{\"name\":\"ActualVisitStartTime\"},{\"name\":\"Id\"},{\"name\":\"CreatedDate\"},{\"name\":\"VisitPriority\"},{\"name\":\"VisitorId\"},{\"name\":\"Status\"},{\"name\":\"PlannedVisitStartTime\"},{\"name\":\"PlannedVisitEndTime\"},{\"name\":\"PlaceId\"},{\"name\":\"Name\"}],\"object\":\"Visit\"}},\"CG_ED_Story_Digest_InStoreLocation\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"RetailStoreId\"},{\"name\":\"Name\"},{\"name\":\"InStoreLocationType\"}],\"object\":\"InStoreLocation\"}},\"CG_ED_Story_Filter_RetailStore\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"'PlannedVisits.Total_Visits_Planned' > 0\"},\"sources\":[\"CG_ED_Story_Slice1_RetailStore\"]},\"CG_ED_Story_Augment_Visit_onto_SurveySubject\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SubjectId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Visit\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"PlaceId\",\"RetailStore.Id\",\"RetailStore.PrimaryContactId\",\"RetailStore.Name\"]},\"sources\":[\"CG_ED_Story_Augment_RetailStore_onto_SurveySubject\",\"CG_ED_Story_Augment_RetailStore_onto_Visit\"]},\"CG_ED_Story_Augment_AssessmentTask_onto_AssessmentTaskOrder\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"AssessmentTaskId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"AssessmentTask\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Visit.RetailStore.Id\",\"Visit.RetailStore.RetailLocationGroupId\"]},\"sources\":[\"CG_ED_Story_Filter_AssessmentTaskOrder_Remove_Duplicates\",\"CG_ED_Story_Augment_Visit_onto_AssessmentTask\"]},\"CG_ED_Story_Digest_Order\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"AccountId\"},{\"name\":\"ActivatedDate\"},{\"name\":\"Type\"},{\"name\":\"OrderNumber\"},{\"name\":\"Id\"}],\"object\":\"Order\"}},\"CG_ED_Story_Filter_Actual_Visits\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"ActualVisitStartTime_Filter_Flag == 1\"},\"sources\":[\"CG_ED_Story_CE_Visit\"]},\"CG_ED_Story_CR_SurveyQuestionResponse\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"offset\":\"previous()\",\"sourceField\":\"ResponseId\"},\"label\":\"FirstResponseValue\",\"name\":\"FirstResponseValue\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"QuestionId\"}],\"partitionBy\":[\"ResponseId\"]},\"sources\":[\"CG_ED_Story_Filter_SurveyQuestionResponse_Keep_NPS_Data\"]},\"CG_ED_Story_Augment_Order_onto_OrderItem\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"OrderId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Order\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"ActivatedDate\",\"AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.Id\",\"AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.RetailLocationGroupId\"]},\"sources\":[\"CG_ED_Story_Augment_Product_onto_OrderItem\",\"CG_ED_Story_Augment_AssessmentTaskOrder_onto_Order\"]},\"CG_ED_Story_Digest_AssessmentTaskOrder\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"AssessmentTaskId\"},{\"name\":\"Id\"},{\"name\":\"CreatedDate\"},{\"name\":\"LastModifiedDate\"},{\"name\":\"OrderId\"},{\"name\":\"RetailStoreId\"}],\"object\":\"AssessmentTaskOrder\"}},\"CG_ED_Story_Slice3_RetailStore\":{\"action\":\"sliceDataset\",\"parameters\":{\"fields\":[{\"name\":\"StoreType\"},{\"name\":\"Priority\"},{\"name\":\"Location.Address.City\"},{\"name\":\"Location.Address.State\"},{\"name\":\"InStoreLocation.Number_of_InStoreLocations\"},{\"name\":\"OrderItem.Quantity\"},{\"name\":\"OrderItem.Unique_Products\"},{\"name\":\"PlannedVisits.Total_Visits_Planned\"},{\"name\":\"PlannedVisits.Total_High_Priority_Visits_Planned\"},{\"name\":\"RetailVisitKpi.Number_of_Promotions\"},{\"name\":\"Case.Cases_Count\"},{\"name\":\"Percent_Successful_Visits\"},{\"name\":\"Avg_Visit_Duration\"},{\"name\":\"Percent_High_Priority_Visits_Completed\"},{\"name\":\"ShareOfShelf_Compliance\"},{\"name\":\"OutOfStock_Compliance\"},{\"name\":\"Facing_Compliance\"},{\"name\":\"Promotion_Compliance\"},{\"name\":\"NetPromoterScore\"},{\"name\":\"RetailStoreGroup.Name\"},{\"name\":\"Avg_InStore_Locations\"},{\"name\":\"Avg_Products\"},{\"name\":\"Avg_SoS_Compliance\"},{\"name\":\"Avg_OOS_Compliance\"},{\"name\":\"Avg_Facing_Compliance\"},{\"name\":\"Avg_Promotion_Compliance\"},{\"name\":\"Avg_Visits_Planned\"},{\"name\":\"Avg_High_Priority_Visits_Planned\"},{\"name\":\"Avg_Promotions\"}],\"mode\":\"select\"},\"sources\":[\"CG_ED_Story_CE_RetailStore2\"]},\"CG_ED_Story_Filter_SurveyQuestionResponse_Keep_NPS_Data\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"'SurveyQuestion.QuestionType' == \\\"NPS\\\"\"},\"sources\":[\"CG_ED_Story_Augment_SurveyQuestion_onto_SurveyQuestionResponse\"]},\"CG_ED_Story_Filter_OrderItem\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"date('Order.ActivatedDate_Year', 'Order.ActivatedDate_Month', 'Order.ActivatedDate_Day') in [\\\"90 days ago\\\"..\\\"current day\\\"]\"},\"sources\":[\"CG_ED_Story_Augment_Order_onto_OrderItem\"]},\"CG_ED_Story_SurveyResponse_onto_SurveyQuestionResponse\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"ResponseId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"SurveyResponse\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"CompletionDateTime\",\"SurveySubject.RetailStoreId\"]},\"sources\":[\"CG_ED_Story_CE_SurveyQuestionResponse_ScoreBucketing\",\"CG_ED_Story_Augment_SurveySubject_onto_SurveyResponse\"]},\"CG_ED_Story_CR_RetailVisitKpi\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"saqlExpression\":\"case when 'PromotionId' is not null then case when current('PromotionId') == previous('PromotionId') then 0 else 1 end end\",\"type\":\"Numeric\",\"scale\":0},\"label\":\"Number_of_Promotions\",\"name\":\"Number_of_Promotions\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"PromotionId\"}],\"partitionBy\":[\"AssessmentTask.Visit.RetailStore.Id\"]},\"sources\":[\"CG_ED_Story_Filter_RetailVisitKpi\"]},\"CG_ED_Story_CE_Case\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"CreatedDate_Filter_Flag\",\"name\":\"CreatedDate_Filter_Flag\",\"precision\":10,\"saqlExpression\":\"case when date('CreatedDate_Year', 'CreatedDate_Month', 'CreatedDate_Day') in [\\\"90 days ago\\\"..\\\"current day\\\"] then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Cases_Count\",\"name\":\"Cases_Count\",\"precision\":10,\"saqlExpression\":\"1\",\"scale\":0,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"CG_ED_Story_Digest_Case\"]},\"CG_ED_Story_Digest_SurveySubject\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"ParentId\"},{\"name\":\"SubjectId\"},{\"name\":\"SurveyId\"},{\"name\":\"SurveyInvitationId\"},{\"name\":\"SurveyResponseId\"}],\"object\":\"SurveySubject\"}},\"CG_ED_Story_Augment_Visit_onto_AssessmentTask\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"ParentId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Visit\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"ActualVisitStartTime\",\"Id\",\"ActualVisitStartTime_Filter_Flag\",\"RetailStore.Id\",\"RetailStore.Name\",\"RetailStore.RetailLocationGroupId\"]},\"sources\":[\"CG_ED_Story_Digest_AssessmentTask\",\"CG_ED_Story_Augment_RetailStore_onto_Visit\"]},\"CG_ED_Story_Digest_SurveyResponse\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"CompletionDateTime\"},{\"name\":\"Id\"},{\"name\":\"InvitationId\"},{\"name\":\"Name\"},{\"name\":\"Status\"},{\"name\":\"SurveyId\"}],\"object\":\"SurveyResponse\"}},\"CG_ED_Story_CE_SurveyQuestionResponse_ScoreBucketing\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"ResponseValueBucket\",\"name\":\"ResponseValueBucket\",\"saqlExpression\":\"case \\n    when 'NumberValue' >= 0 and 'NumberValue' <= 6 then \\\"Detractors\\\"\\nwhen 'NumberValue' >= 7  and 'NumberValue' <= 8 then \\\"Passives\\\" \\n    when 'NumberValue' >= 9  and 'NumberValue' <= 10 then \\\"Promoters\\\" \\n    end\",\"type\":\"Text\"},{\"label\":\"Promoters\",\"name\":\"Promoters\",\"precision\":10,\"saqlExpression\":\"case when 'ResponseValueBucket' == \\\"Promoters\\\" then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Detractors\",\"name\":\"Detractors\",\"precision\":10,\"saqlExpression\":\"case when 'ResponseValueBucket' == \\\"Detractors\\\" then 1 else 0 end\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"All_Responses\",\"name\":\"All_Responses\",\"precision\":10,\"saqlExpression\":\"1\",\"scale\":0,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"CG_ED_Story_Filter_SurveyQuestionResponse_GetFirstResponse\"]},\"CG_ED_Story_CR_OrderItem_GetUniqueProductsByStoreGroup\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"saqlExpression\":\"case when current('Product2Id') == previous('Product2Id') then 0 else 1 end\",\"type\":\"Numeric\",\"scale\":0},\"label\":\"Unique_Products_SG\",\"name\":\"Unique_Products_SG\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"Product2Id\"}],\"partitionBy\":[\"Order.AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.RetailLocationGroupId\"]},\"sources\":[\"CG_ED_Story_Filter_OrderItem\"]},\"CG_ED_Story_Augment_RetailStoreGroup_onto_RetailStore\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"RetailLocationGroupId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"RetailStoreGroup\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"StoreGroup.OrderItem.Order.AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.RetailLocationGroupId\",\"OrderItem.Order.AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.RetailLocationGroupId\",\"Avg_InStore_Locations_by_StoreGroup\",\"Avg_Products_by_StoreGroup\",\"Avg_SoS_Compliance_by_StoreGroup\",\"Avg_OOS_Compliance_by_StoreGroup\",\"Avg_Facing_Compliance_by_StoreGroup\",\"Avg_Promotion_Compliance_by_StoreGroup\",\"Avg_Visits_Planned_by_StoreGroup\",\"Avg_High_Priority_Visits_Planned_by_StoreGroup\",\"Avg_Promotions_by_StoreGroup\",\"Name\"]},\"sources\":[\"CG_ED_Story_CE_RetailStore_Calc_Avg\",\"CG_ED_Story_CE_RetailStoreGroup_Calc_Avg\"]},\"CG_ED_Story_Digest_RetailStore\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"AccountId\"},{\"name\":\"Id\"},{\"name\":\"StoreType\"},{\"name\":\"RetailLocationGroupId\"},{\"name\":\"Priority\"},{\"name\":\"PrimaryContactId\"},{\"name\":\"Name\"},{\"name\":\"LocationId\"}],\"object\":\"RetailStore\"}},\"CG_ED_Story_CE_RetailStore_Calc_Avg\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Avg_InStore_Locations_by_AllStores\",\"name\":\"Avg_InStore_Locations_by_AllStores\",\"precision\":16,\"saqlExpression\":\"'Total.InStoreLocation.Number_of_InStoreLocations' / 'Total.Total_Stores'\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Avg_Products_by_AllStores\",\"name\":\"Avg_Products_by_AllStores\",\"precision\":16,\"saqlExpression\":\"'Total.OrderItem.Unique_Products' / 'Total.Total_Stores'\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Avg_SoS_Compliance_by_AllStores\",\"name\":\"Avg_SoS_Compliance_by_AllStores\",\"precision\":16,\"saqlExpression\":\"'Total.ShareOfShelf_Compliance' / 'Total.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_OOS_Compliance_by_AllStores\",\"name\":\"Avg_OOS_Compliance_by_AllStores\",\"precision\":16,\"saqlExpression\":\"'Total.OutOfStock_Compliance' / 'Total.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_Facing_Compliance_by_AllStores\",\"name\":\"Avg_Facing_Compliance_by_AllStores\",\"precision\":16,\"saqlExpression\":\"'Total.Facing_Compliance' / 'Total.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_Promotion_Compliance_by_AllStores\",\"name\":\"Avg_Promotion_Compliance_by_AllStores\",\"precision\":16,\"saqlExpression\":\"'Total.Promotion_Compliance' / 'Total.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_Visits_Planned_by_AllStores\",\"name\":\"Avg_Visits_Planned_by_AllStores\",\"precision\":16,\"saqlExpression\":\"'Total.PlannedVisits.Total_Visits_Planned' / 'Total.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_High_Priority_Visits_Planned_by_AllStores\",\"name\":\"Avg_High_Priority_Visits_Planned_by_AllStores\",\"precision\":16,\"saqlExpression\":\"'Total.PlannedVisits.Total_High_Priority_Visits_Planned' / 'Total.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"},{\"label\":\"Avg_Promotions_by_AllStores\",\"name\":\"Avg_Promotions_by_AllStores\",\"precision\":16,\"saqlExpression\":\"'RetailVisitKpi.Number_of_Promotions' / 'Total.Total_Stores'\",\"scale\":2,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"CG_ED_Story_Augment_RetailStore_Self\"]},\"CG_ED_Story_CE_SurveySubject_Combine_ParticipantId\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"RetailStoreId\",\"name\":\"RetailStoreId\",\"saqlExpression\":\"coalesce('RetailStore.Id', 'Visit.RetailStore.Id')\",\"type\":\"Text\"},{\"label\":\"StoreName\",\"name\":\"StoreName\",\"saqlExpression\":\"coalesce('RetailStore.Name','Visit.RetailStore.Name')\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"CG_ED_Story_Augment_Visit_onto_SurveySubject\"]},\"CG_ED_Story_CR_OrderItem_GetUniqueProductsByStore\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"saqlExpression\":\"case when current('Product2Id') == previous('Product2Id') then 0 else 1 end\",\"type\":\"Numeric\",\"scale\":0},\"label\":\"Unique_Products\",\"name\":\"Unique_Products\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"Product2Id\"}],\"partitionBy\":[\"Order.AssessmentTaskOrder.AssessmentTask.Visit.RetailStore.Id\"]},\"sources\":[\"CG_ED_Story_Filter_OrderItem\"]},\"CG_ED_Story_Augment_SurveySubject_onto_SurveyResponse\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"InvitationId\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"SurveySubject\",\"rightKey\":[\"SurveyInvitation.Id\"],\"rightSelect\":[\"RetailStoreId\",\"StoreName\"]},\"sources\":[\"CG_ED_Story_Digest_SurveyResponse\",\"CG_ED_Story_CE_SurveySubject_Combine_ParticipantId\"]}}}",null]